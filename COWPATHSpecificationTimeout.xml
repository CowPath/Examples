<scxml initial="COWPATH_state" name="" version="1.0" xmlns="http://www.w3.org/2005/07/scxml" 
			 clock="true" notes="true" previewEnable="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<state id="COWPATH_state">
		<initial>			
			<transition event="COWPATH:LOAD" cond="http://www.timeout.com/london/*" target="http://www.timeout.com/london/*"/> 
		</initial>
		<parallel  id="http://www.timeout.com/london/*">
			<state id="http://www.timeout.com/london/film/*">
				<transition event="COWPATH:CLICK" cond="goToImdb" target="http://www.imdb.com/find?*">
					<script>GoTo("http://www.imdb.com/list/oMJaW27eArE/").
								  Paste("$filmTitle").Into("//*[@id='navbar-query']").
								  Click("//*[@id='navbar-submit-button']");
					</script>
				</transition>
				<onentry>
					<script>Copy("//*[@id='mainContent']/div/h1/text()").Into("$filmTitle");</script>
				</onentry>
			</state>
			<state id="http://www.timeout.com/london/restaurants/*">
				<transition event="COWPATH:CLICK" cond="goToSquareMeal" target="http://www.squaremeal.co.uk/search?*">
					<script>GoTo("http://www.squaremeal.co.uk/restaurants/london/").
								  Paste("$restaurantName").Into("//*[@id='s']").
								  Click("//*[@value='Go']");
					</script>
				</transition>
				<onentry>
					<script>Copy("//*[@id='mainContent']/div/h1/text()").Into("$restaurantName");</script>
				</onentry>
			</state>
		</parallel>
		<state id="http://www.imdb.com/find?*">
			<transition event="COWPATH:CLICK" cond="backToTimeOut" target="http://www.timeout.com/london/*"/>
			<transition event="COWPATH:LOAD" cond="http://www.imdb.com/title/*" target="http://www.imdb.com/title/*"/>
		</state>
		<state id="http://www.imdb.com/title/*">
			<transition event="COWPATH:CLICK" cond="backToTimeOut" target="http://www.timeout.com/london/*"/>
			<transition event="COWPATH:CLICK" cond="goToFacebook" target="https://www.facebook.com/events/list">
				<script>GoTo("https://www.facebook.com/events/list").
							  Click("//*[@class='mrs uiButton uiButtonOverlay uiButtonLarge']").
							  Paste("$filmTitle").Into("//*[@name='title']").
							  Paste("$description").Into("//*[@name='details']");
				</script>
			</transition>
			<onentry>
				<script>Copy("//*[@itemprop='description']/text()").Into("$description");</script>
			</onentry>
		</state>
		<state  id="http://www.squaremeal.co.uk/search?*">
			<transition event="COWPATH:CLICK" cond="backToTimeOut" target="http://www.timeout.com/london/*"/>
			<transition event="COWPATH:LOAD" cond="http://www.squaremeal.co.uk/restaurants/london/view/*" 
							  target="http://www.squaremeal.co.uk/restaurants/london/view/*"/>
		</state>
		<state id="http://www.squaremeal.co.uk/restaurants/london/view/*">
			<transition event="COWPATH:CLICK" cond="backToTimeOut" target="http://www.timeout.com/london/*"/>
			<transition event="COWPATH:CLICK" cond="goToFacebook" target="https://www.facebook.com/events/list">
				<script>GoTo("https://www.facebook.com/events/list").
							  Click("//*[@class='mrs uiButton uiButtonOverlay uiButtonLarge']").
							  Paste("$restaurantName").Into("//*[@name='title']").
							  Paste("$description").Into("//*[@name='details']");
				</script>
			</transition>
			<onentry>
				<script>Copy("//*[@class='description']/p/text()").Into("$description");</script>
			</onentry>
		</state>
		<state id="https://www.facebook.com/events/list">
			<transition event="COWPATH:CLICK" cond="backToTimeOut" target="http://www.timeout.com/london/*"/>
		</state>
	</state>
</scxml>




